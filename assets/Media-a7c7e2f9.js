import{l as d,r as y,b as $,o,c as u,e as g,u as m,i as p,N as k,f as i,t as l,a as h,F as b,m as x,d as B,w,p as M,q as R,s as S,A as T,B as I,C as D}from"./index-5b889531.js";const F={class:"main__intro"},O={alt:"",class:"main__intro-poster"},z={class:"main__intro-block"},A={class:"main__intro-block-left"},N={class:"main__intro-block-left-title"},C={class:"main__intro-block-left-text"},L={class:"main__intro-block-left-descr"},U={class:"main__intro-block-right"},Y={alt:"",class:"main__intro-block-right-img"},j={class:"main__intro-actors"},V=i("h2",{class:"main__intro-actors-title"},"В главных ролях",-1),q={__name:"Intro",props:{type:String,item:Object},setup(t){const e=t,n=d(()=>new Date(e.item.release_date).getFullYear()||new Date(e.item.first_air_date).getFullYear()),c=d(()=>e.item.genres.reduce((s,_)=>s+`, ${_.name}`,"")),a=d(()=>{if(e.type=="tv"&&e.item.episode_run_time.length==0)return"";let s=e.type=="movie"?e.item.runtime:e.type=="tv"?e.item.episode_run_time[0]:"",_=Math.floor(s/60),r=s%60;return _==0?`${r}m`:`${_}h ${r}m`});return(s,_)=>{const r=y("Trailer"),f=y("Actors"),v=$("lazy");return o(),u("div",F,[g(i("img",O,null,512),[[v,t.item.backdrop_path?m(p)+t.item.backdrop_path:t.item.poster_path?m(p)+t.item.poster_path:m(k)]]),i("div",z,[i("div",A,[i("h1",N,l(t.item.title||t.item.name),1),i("p",C,l(t.item.overview||"Нет описания"),1),i("p",L,[i("span",null,l(n.value),1),i("span",null,l(c.value),1),i("span",null,l(a.value),1)]),h(r)]),i("div",U,[g(i("img",Y,null,512),[[v,m(p)+t.item.backdrop_path]])]),i("div",j,[V,h(f,{type:t.type,id:t.item.id,count:"6"},null,8,["type","id"])])])])}}},E={class:"main__info"},G={class:"main__info-item-name"},H={class:"main__info-item-text"},K={__name:"Info",props:{item:Object},setup(t){const e=t,n=d(()=>[{name:"Бюджет",text:e.item.budget?"$"+e.item.budget:"Неизвестно"},{name:"Сборы",text:e.item.revenue?"$"+e.item.revenue:"Неизвестно"},{name:"Статус",text:e.item.status=="Released"?"Выпущено":e.item.status},{name:"Исходное название",text:e.item.original_title||e.item.original_name}]);return(c,a)=>(o(),u("div",E,[(o(!0),u(b,null,x(n.value,s=>(o(),u("div",{class:"main__info-item",key:s.name},[i("span",G,l(s.name),1),i("span",H,l(s.text),1)]))),128))]))}},P={class:"main__rec"},J={class:"container"},Q=i("h2",{class:"main__rec-title"},"Рекомендации",-1),W={class:"main__rec-list"},X={alt:"",class:"main__rec-list-item-img"},Z={class:"main__rec-list-item-name"},ee={__name:"Rec",props:{rec:Array,type:String},setup(t){return(e,n)=>{const c=y("router-link"),a=$("lazy");return o(),u("div",P,[i("div",J,[Q,i("div",W,[(o(!0),u(b,null,x(t.rec,s=>(o(),B(c,{key:s.id,to:`${s.id}`,class:"main__rec-list-item"},{default:w(()=>[g(i("img",X,null,512),[[a,s.backdrop_path?m(p)+s.backdrop_path:s.poster_path?m(p)+s.poster_path:m(k)]]),i("h2",Z,l(s.name||s.title),1)]),_:2},1032,["to"]))),128))])])])}}};const te=M({id:"rec",state:()=>({url:"https://api.themoviedb.org/3/",recomMovie:null,recomTv:null}),actions:{async getRecom({type:t,id:e}){try{const n=await R.get(`${this.url}${t}/${e}/recommendations?api_key=${S}&language=ru-RU`);t=="movie"?this.recomMovie=n.data.results:this.recomTv=n.data.results}catch(n){console.log("Ошибка произошла при получении рекомендаций",n)}}}}),se={key:0,class:"main__media"},ne={__name:"Media",props:{type:String},setup(t){const e=t,n=T(),c=te(),a=I();c.getRecom({type:e.type,id:n.params.id}),a.getItemById({type:e.type,id:n.params.id});const s=d(()=>e.type=="movie"?a.movie:e.type=="tv"?a.tv:""),_=d(()=>{let r=e.type=="movie"?c.recomMovie:e.type=="tv"?c.recomTv:"";if(r)return r.slice(0,4)});return D(()=>{a.movie=a.tv=null}),(r,f)=>{const v=y("Loader");return s.value?(o(),u("div",se,[h(q,{type:t.type,item:s.value},null,8,["type","item"]),h(K,{item:s.value},null,8,["item"]),h(ee,{type:t.type,rec:_.value},null,8,["type","rec"])])):(o(),B(v,{key:1}))}}};export{ne as _};
